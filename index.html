<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quote Collection</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }

        /* Header section */
        .header {
            background-color: white;
            padding: 30px 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 0;
        }

        /* Sticky header for mobile */
        @media (max-width: 968px) {
            .header {
                position: sticky;
                top: 0;
                z-index: 1000;
                padding: 20px 15px;
            }

            .header h1 {
                font-size: 1.8em;
                margin-bottom: 5px;
            }

            .header .tagline {
                font-size: 1em;
                margin-bottom: 15px;
            }

            .header .north-star {
                display: none;
            }
        }

        /* Main layout container */
        .main-container {
            display: flex;
            gap: 30px;
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        /* Sidebar on the left */
        .sidebar {
            flex: 0 0 350px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            position: sticky;
            top: 20px;
            align-self: flex-start;
            max-height: calc(100vh - 40px);
            overflow-y: auto;
        }

        /* Main content area */
        .main-content {
            flex: 1;
            min-width: 0;
        }

        /* Mobile filter button */
        .mobile-filter-btn {
            display: none;
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
        }

        .mobile-filter-btn:hover {
            background-color: #2980b9;
        }

        /* Mobile responsive */
        @media (max-width: 968px) {
            .main-container {
                flex-direction: column;
            }

            /* Show filter button on mobile */
            .mobile-filter-btn {
                display: inline-block;
            }

            /* Hide sidebar by default on mobile */
            .sidebar {
                display: none;
                flex: 1;
                position: fixed;
                top: 0;
                left: 0;
                width: 80%;
                max-width: 350px;
                height: 100vh;
                background-color: white;
                z-index: 2000;
                overflow-y: auto;
                box-shadow: 2px 0 10px rgba(0,0,0,0.3);
                padding: 20px;
            }

            /* Show sidebar when active */
            .sidebar.active {
                display: flex;
                flex-direction: column;
                animation: slideIn 0.3s ease-out;
            }

            /* Slide in animation */
            @keyframes slideIn {
                from {
                    transform: translateX(-100%);
                }
                to {
                    transform: translateX(0);
                }
            }

            /* Overlay backdrop */
            .sidebar-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5);
                z-index: 1500;
            }

            .sidebar-overlay.active {
                display: block;
            }

            /* Close button for sidebar */
            .sidebar-close-btn {
                display: block;
                background-color: #e74c3c;
                color: white;
                border: none;
                padding: 8px 16px;
                border-radius: 4px;
                font-size: 0.9em;
                font-weight: bold;
                cursor: pointer;
                margin-bottom: 15px;
                align-self: flex-end;
            }

            .sidebar-close-btn:hover {
                background-color: #c0392b;
            }
        }

        /* Hide close button on desktop */
        .sidebar-close-btn {
            display: none;
        }

        h1 {
            color: #2c3e50;
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .tagline {
            text-align: center;
            font-size: 1.2em;
            color: #7f8c8d;
            font-style: italic;
            margin-bottom: 40px;
        }

        .north-star {
            max-width: 800px;
            margin: 20px auto 0;
            text-align: center;
        }

        .north-star p {
            color: #7f8c8d;
            font-size: 1.1em;
        }

        .status {
            text-align: center;
            color: #27ae60;
            font-weight: bold;
        }

        .quote-container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            border-left: 4px solid #3498db;
        }

        .quote-text {
            font-size: 1.3em;
            font-style: italic;
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .quote-author {
            text-align: right;
            color: #7f8c8d;
            font-weight: bold;
        }

        /* CSS for the Add Quote form section */

        /* Each input field group (label + input) */
        .form-group {
            margin-bottom: 20px;                        /* Space between form fields */
        }

        /* Labels for the form inputs */
        .form-group label {
            display: block;                             /* Makes label take full width */
            margin-bottom: 8px;                         /* Space between label and input */
            color: #2c3e50;                             /* Dark gray color */
            font-weight: bold;                          /* Make text bold */
        }

        /* Text inputs and textarea styling */
        .form-group input,
        .form-group textarea {
            width: 100%;                                /* Full width of container */
            padding: 10px;                              /* Space inside the input */
            border: 2px solid #ddd;                     /* Light gray border */
            border-radius: 4px;                         /* Slightly rounded corners */
            font-size: 1em;                             /* Same size as body text */
            font-family: inherit;                       /* Use same font as page */
            box-sizing: border-box;                     /* Include padding in width */
        }

        /* When user clicks into an input - highlight it with blue border */
        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;                              /* Remove default browser outline */
            border-color: #3498db;                      /* Change border to blue */
        }

        /* The Add Quote button styling */
        .add-button {
            background-color: #3498db;                  /* Blue background */
            color: white;                               /* White text */
            padding: 12px 30px;                         /* Space inside button */
            border: none;                               /* Remove default border */
            border-radius: 4px;                         /* Rounded corners */
            font-size: 1em;                             /* Normal text size */
            font-weight: bold;                          /* Bold text */
            cursor: pointer;                            /* Show hand cursor on hover */
        }

        /* When user hovers mouse over the button - make it darker */
        .add-button:hover {
            background-color: #2980b9;                  /* Darker blue */
        }

        /* Random quote section styling */
        .random-quote-section {
            background-color: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            text-align: center;
        }

        .random-quote-section h2 {
            color: #3498db;
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        /* Random quote button styling */
        .random-button {
            background-color: #9b59b6;                  /* Purple background */
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 4px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            margin-right: 10px;
        }

        .random-button:hover {
            background-color: #8e44ad;                  /* Darker purple */
        }

        /* Show all button styling */
        .show-all-button {
            background-color: #27ae60;                  /* Green background */
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 4px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            display: none;                              /* Hidden by default */
        }

        .show-all-button:hover {
            background-color: #229954;                  /* Darker green */
        }

        /* Sidebar sections styling */
        .search-section,
        .category-section,
        .add-quote-section {
            background-color: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .search-section h2,
        .category-section h2,
        .add-quote-section h2 {
            color: #3498db;
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        /* Search input box styling */
        #searchInput {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 4px;
            font-size: 1em;
            font-family: inherit;
            box-sizing: border-box;
        }

        /* When user clicks into the search box - highlight with blue border */
        #searchInput:focus {
            outline: none;
            border-color: #3498db;
        }

        /* Search result count styling */
        .search-results-info {
            margin-top: 10px;
            color: #7f8c8d;
            font-size: 0.9em;
        }

        /* Category filter specific styling */

        .category-group {
            margin-bottom: 20px;
        }

        .category-group h3 {
            color: #2c3e50;
            font-size: 1em;
            margin-bottom: 10px;
            margin-top: 0;
        }

        .category-checkboxes {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .category-checkbox {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            background-color: #ecf0f1;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .category-checkbox:hover {
            background-color: #d5dbdc;
        }

        .category-checkbox input[type="checkbox"] {
            margin-right: 6px;
            cursor: pointer;
        }

        .category-checkbox label {
            cursor: pointer;
            font-size: 0.9em;
            user-select: none;
        }

        .clear-filters-button {
            background-color: #95a5a6;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            font-size: 0.9em;
            cursor: pointer;
            margin-top: 10px;
        }

        .clear-filters-button:hover {
            background-color: #7f8c8d;
        }

        /* Category tags on quotes */
        .quote-categories {
            margin-top: 10px;
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .category-tag {
            display: inline-block;
            padding: 4px 10px;
            background-color: #3498db;
            color: white;
            border-radius: 12px;
            font-size: 0.8em;
        }

        /* Wikipedia link styling */
        .wiki-link {
            color: #3498db;
            text-decoration: underline;
            transition: color 0.2s;
            cursor: pointer;
        }

        .wiki-link:hover {
            color: #2980b9;
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <!-- Header Section -->
    <div class="header">
        <h1 id="headerQuote" style="font-style: italic;">"Loading..."</h1>
        <p id="headerAuthor" class="tagline">Welcome to our Quote Collection</p>
        <div class="north-star">
            <p>I'm building a quote collection for community so that we can save and revisit quotes that inspire or resonate with everyone.</p>
        </div>
        <button id="mobileFilterBtn" class="mobile-filter-btn">üîç Search & Filter</button>
    </div>

    <!-- Sidebar overlay for mobile -->
    <div id="sidebarOverlay" class="sidebar-overlay"></div>

    <!-- Main Container with Sidebar and Content -->
    <div class="main-container">
        <!-- Left Sidebar -->
        <div class="sidebar" id="sidebar">
            <button id="sidebarCloseBtn" class="sidebar-close-btn">‚úï Close</button>
            <!-- Search Section -->
    <div class="search-section">
        <h2>Search Quotes</h2>
        <input type="text" id="searchInput" placeholder="Search by quote text or author name...">
        <div id="searchResultsInfo" class="search-results-info"></div>
    </div>

    <!-- Category Filter Section -->
    <div class="category-section">
        <h2>Filter by Category</h2>

        <div class="category-group">
            <h3>Source</h3>
            <div class="category-checkboxes" id="sourceCategories">
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-tech" value="Tech">
                    <label for="cat-tech">Tech</label>
                </div>
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-cricket" value="Cricket">
                    <label for="cat-cricket">Cricket</label>
                </div>
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-movies" value="Movies">
                    <label for="cat-movies">Movies</label>
                </div>
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-hollywood" value="Hollywood">
                    <label for="cat-hollywood">Hollywood</label>
                </div>
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-bollywood" value="Bollywood">
                    <label for="cat-bollywood">Bollywood</label>
                </div>
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-sports" value="Sports">
                    <label for="cat-sports">Sports</label>
                </div>
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-leaders" value="Leaders">
                    <label for="cat-leaders">Leaders</label>
                </div>
            </div>
        </div>

        <div class="category-group">
            <h3>Theme</h3>
            <div class="category-checkboxes" id="themeCategories">
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-motivation" value="Motivation">
                    <label for="cat-motivation">Motivation</label>
                </div>
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-success" value="Success">
                    <label for="cat-success">Success</label>
                </div>
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-failure" value="Failure">
                    <label for="cat-failure">Failure</label>
                </div>
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-dreams" value="Dreams">
                    <label for="cat-dreams">Dreams</label>
                </div>
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-hardwork" value="Hard Work">
                    <label for="cat-hardwork">Hard Work</label>
                </div>
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-leadership" value="Leadership">
                    <label for="cat-leadership">Leadership</label>
                </div>
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-innovation" value="Innovation">
                    <label for="cat-innovation">Innovation</label>
                </div>
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-perseverance" value="Perseverance">
                    <label for="cat-perseverance">Perseverance</label>
                </div>
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-wisdom" value="Wisdom">
                    <label for="cat-wisdom">Wisdom</label>
                </div>
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-courage" value="Courage">
                    <label for="cat-courage">Courage</label>
                </div>
            </div>
        </div>

        <button id="clearFiltersButton" class="clear-filters-button">Clear All Filters</button>
    </div>

    <!-- Form Section: Where users can add new quotes -->
    <div class="add-quote-section">
        <h2>Add Your Own Quote</h2>
        <!-- The form element - collects user input -->
        <form id="quoteForm">
            <!-- First input group: for the quote text -->
            <div class="form-group">
                <label for="quoteText">Quote:</label>
                <!-- textarea allows multiple lines of text -->
                <!-- required means user must fill this out -->
                <textarea id="quoteText" name="quoteText" rows="3" required placeholder="Enter the quote here..."></textarea>
            </div>
            <!-- Second input group: for the author name -->
            <div class="form-group">
                <label for="quoteAuthor">Author:</label>
                <!-- input type="text" is a single-line text box -->
                <input type="text" id="quoteAuthor" name="quoteAuthor" required placeholder="Author name">
            </div>
            <!-- Submit button - triggers form submission -->
            <button type="submit" class="add-button">Add Quote</button>
        </form>
    </div>
        </div>
        <!-- End of Sidebar -->

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Random Quote Section -->
            <div class="random-quote-section">
                <h2>Feeling Lucky?</h2>
                <button id="randomButton" class="random-button">Show Random Quote</button>
                <button id="anotherRandomButton" class="random-button" style="display: none;">Show Another Random Quote</button>
                <button id="showAllButton" class="show-all-button">Show All Quotes</button>
            </div>

            <!-- Container where all quotes will appear -->
            <div id="quotesContainer"></div>
        </div>
        <!-- End of Main Content -->
    </div>
    <!-- End of Main Container -->

    <!-- Load the quote data from external file -->
    <!-- This must come BEFORE our main script so initialQuotes is available -->
    <script src="data.js"></script>

    <script>
        // JavaScript starts here

        // localStorage key - this is the name we use to store/retrieve quotes
        const STORAGE_KEY = 'quoteCollection';

        // Function to save quotes to localStorage
        // localStorage only stores strings, so we convert the array to JSON
        function saveQuotes() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(quotes));
        }

        // Function to load quotes from localStorage
        // Returns the saved quotes, or null if nothing is saved yet
        function loadQuotes() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                // If we found saved quotes, parse the JSON string back into an array
                return JSON.parse(saved);
            }
            return null;
        }

        // Create an array to store all quotes
        // First, try to load from localStorage
        // If nothing is saved yet, use the initial quotes from data.js and save them
        let quotes;
        const savedQuotes = loadQuotes();

        // Check if saved quotes have categories - if not, we need to reload from initialQuotes
        const needsUpdate = savedQuotes && savedQuotes.length > 0 &&
                           (!savedQuotes[0].categories || !Array.isArray(savedQuotes[0].categories));

        if (savedQuotes && !needsUpdate) {
            // We have saved quotes with categories - use them
            quotes = savedQuotes;
        } else {
            // No saved quotes yet OR old quotes without categories - use initial quotes and save them
            quotes = [...initialQuotes];
            saveQuotes();
        }

        // Display a random quote in the header
        // Pick a random quote from the initialQuotes array (not user-added quotes)
        function displayHeaderQuote() {
            const randomIndex = Math.floor(Math.random() * initialQuotes.length);
            const randomQuote = initialQuotes[randomIndex];

            // Update the header with the random quote
            document.getElementById('headerQuote').textContent = '"' + randomQuote.text + '"';
            document.getElementById('headerAuthor').innerHTML = '‚Äî ' + createWikipediaLink(randomQuote.author);
        }

        // Get references to HTML elements so we can interact with them
        // document.getElementById finds an element by its ID
        const form = document.getElementById('quoteForm');
        const quotesContainer = document.getElementById('quotesContainer');
        const randomButton = document.getElementById('randomButton');
        const anotherRandomButton = document.getElementById('anotherRandomButton');
        const showAllButton = document.getElementById('showAllButton');
        const searchInput = document.getElementById('searchInput');
        const searchResultsInfo = document.getElementById('searchResultsInfo');
        const clearFiltersButton = document.getElementById('clearFiltersButton');

        // Mobile filter button elements
        const mobileFilterBtn = document.getElementById('mobileFilterBtn');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebarOverlay');
        const sidebarCloseBtn = document.getElementById('sidebarCloseBtn');

        // Variable to track if we're showing one random quote or all quotes
        let showingRandomQuote = false;

        // Variable to track the current search term
        let currentSearchTerm = '';

        // Set to track selected categories (using Set for easy add/remove)
        let selectedCategories = new Set();

        // Helper function to create Wikipedia link from author name
        function createWikipediaLink(author) {
            let searchTerm;
            let tooltipName;

            // Check if author has parentheses (indicating movie character)
            const movieMatch = author.match(/\(([^)]+)\)/);

            if (movieMatch) {
                // It's a movie character - use the movie name for the search
                searchTerm = movieMatch[1].trim();
                tooltipName = movieMatch[1].trim();
            } else {
                // Regular person - use their name
                searchTerm = author.trim();
                tooltipName = author.trim();
            }

            // URL encode the search term to handle special characters
            const encodedSearch = encodeURIComponent(searchTerm);

            // Create Wikipedia search URL (redirects to page if exact match exists)
            const wikiUrl = `https://en.wikipedia.org/w/index.php?search=${encodedSearch}`;

            // Return HTML with link
            return `<a href="${wikiUrl}" target="_blank" rel="noopener noreferrer" class="wiki-link" title="Search ${tooltipName} on Wikipedia">${author}</a>`;
        }

        // Function to filter quotes based on search term and categories
        // Returns an array of quotes that match the filters
        function getFilteredQuotes() {
            let filtered = quotes;

            // Filter by search term
            if (currentSearchTerm) {
                const searchLower = currentSearchTerm.toLowerCase();
                filtered = filtered.filter(function(quote) {
                    const textLower = quote.text.toLowerCase();
                    const authorLower = quote.author.toLowerCase();
                    return textLower.includes(searchLower) || authorLower.includes(searchLower);
                });
            }

            // Filter by categories (if any are selected)
            // Uses AND logic - quote must have ALL selected categories
            if (selectedCategories.size > 0) {
                filtered = filtered.filter(function(quote) {
                    // Check if quote has categories property
                    if (!quote.categories || !Array.isArray(quote.categories)) {
                        return false;
                    }
                    // Check if quote has ALL of the selected categories
                    // Convert Set to Array and check if every selected category is in the quote
                    return Array.from(selectedCategories).every(function(selectedCat) {
                        return quote.categories.includes(selectedCat);
                    });
                });
            }

            return filtered;
        }

        // Listen for when user types in the search box
        // 'input' event fires every time the text changes
        searchInput.addEventListener('input', function(e) {
            // Update the current search term with what the user typed
            currentSearchTerm = e.target.value;

            // If we're in random quote mode, exit it when user searches
            if (showingRandomQuote) {
                showingRandomQuote = false;
                randomButton.style.display = 'inline-block';
                anotherRandomButton.style.display = 'none';
                showAllButton.style.display = 'none';
            }

            // Display the filtered quotes
            displayQuotes();
        });

        // Listen for category checkbox changes
        // Get all checkboxes with type="checkbox" inside category sections
        const categoryCheckboxes = document.querySelectorAll('.category-checkbox input[type="checkbox"]');
        categoryCheckboxes.forEach(function(checkbox) {
            checkbox.addEventListener('change', function() {
                // When checkbox is checked, add category to selectedCategories
                // When unchecked, remove it
                if (this.checked) {
                    selectedCategories.add(this.value);
                } else {
                    selectedCategories.delete(this.value);
                }

                // If we're in random quote mode, exit it when user filters
                if (showingRandomQuote) {
                    showingRandomQuote = false;
                    randomButton.style.display = 'inline-block';
                    anotherRandomButton.style.display = 'none';
                    showAllButton.style.display = 'none';
                }

                // Display the filtered quotes
                displayQuotes();
            });
        });

        // Clear all filters button
        clearFiltersButton.addEventListener('click', function() {
            // Uncheck all category checkboxes
            categoryCheckboxes.forEach(function(checkbox) {
                checkbox.checked = false;
            });

            // Clear the selected categories set
            selectedCategories.clear();

            // Display all quotes
            displayQuotes();
        });

        // Mobile filter button functionality
        // Open sidebar when filter button is clicked
        mobileFilterBtn.addEventListener('click', function() {
            sidebar.classList.add('active');
            sidebarOverlay.classList.add('active');
        });

        // Function to close the sidebar
        function closeSidebar() {
            sidebar.classList.remove('active');
            sidebarOverlay.classList.remove('active');
        }

        // Close sidebar when close button is clicked
        sidebarCloseBtn.addEventListener('click', closeSidebar);

        // Close sidebar when overlay backdrop is clicked
        sidebarOverlay.addEventListener('click', closeSidebar);

        // Listen for when the form is submitted (when user clicks "Add Quote")
        // addEventListener watches for events (like submit, click, etc.)
        form.addEventListener('submit', function(e) {
            // Prevent the page from reloading (default form behavior)
            e.preventDefault();

            // Get the values that the user typed into the form fields
            // .value gives us the current text inside an input
            const quoteText = document.getElementById('quoteText').value;
            const quoteAuthor = document.getElementById('quoteAuthor').value;

            // Add the new quote to our quotes array
            // push() adds an item to the end of an array
            // We're adding an object with two properties: text and author
            quotes.push({
                text: quoteText,
                author: quoteAuthor
            });

            // Save the updated quotes array to localStorage
            saveQuotes();

            // Clear the search so user can see their new quote
            currentSearchTerm = '';
            searchInput.value = '';

            // Call the function to display all quotes on the page
            displayQuotes();

            // Clear the form inputs so user can add another quote
            form.reset();
        });

        // Random Quote button - show one random quote (initial click)
        randomButton.addEventListener('click', function() {
            showingRandomQuote = true;
            displayRandomQuote();
            // Hide the initial "Show Random Quote" button
            // Show both "Show Another Random Quote" and "Show All Quotes" buttons
            randomButton.style.display = 'none';
            anotherRandomButton.style.display = 'inline-block';
            showAllButton.style.display = 'inline-block';
        });

        // Another Random Quote button - show another random quote
        anotherRandomButton.addEventListener('click', function() {
            // Display another random quote
            displayRandomQuote();
        });

        // Show All Quotes button - return to showing all quotes
        showAllButton.addEventListener('click', function() {
            showingRandomQuote = false;
            displayQuotes();
            // Reset buttons: show the initial "Show Random Quote" button
            // Hide the "Show Another Random Quote" and "Show All Quotes" buttons
            randomButton.style.display = 'inline-block';
            anotherRandomButton.style.display = 'none';
            showAllButton.style.display = 'none';
        });

        // When the page first loads, display random header quote and all quotes
        displayHeaderQuote();
        displayQuotes();

        // Function to display all quotes on the page
        function displayQuotes() {
            // Clear everything in the container (start fresh)
            quotesContainer.innerHTML = '';

            // Get the filtered quotes based on current search term
            const filteredQuotes = getFilteredQuotes();

            // Update search results info
            if (currentSearchTerm) {
                // Show how many results match the search
                searchResultsInfo.textContent = `Found ${filteredQuotes.length} quote${filteredQuotes.length !== 1 ? 's' : ''} matching "${currentSearchTerm}"`;
            } else {
                // Clear the info when not searching
                searchResultsInfo.textContent = '';
            }

            // If no quotes match, show a message with option to add quote
            if (filteredQuotes.length === 0) {
                quotesContainer.innerHTML = `
                    <div style="text-align: center; padding: 40px;">
                        <p style="color: #7f8c8d; font-size: 1.2em; margin-bottom: 20px;">No quotes found matching your filters.</p>
                        <p style="color: #95a5a6; margin-bottom: 20px;">Be the first to add one!</p>
                        <button id="scrollToAddQuote" class="add-button">Add a Quote</button>
                    </div>
                `;

                // Add click handler to scroll to add quote form
                const scrollButton = document.getElementById('scrollToAddQuote');
                if (scrollButton) {
                    scrollButton.addEventListener('click', function() {
                        // Scroll to the add quote form
                        const addQuoteSection = document.querySelector('.add-quote-section');
                        addQuoteSection.scrollIntoView({ behavior: 'smooth', block: 'start' });

                        // Focus on the quote text input
                        setTimeout(function() {
                            document.getElementById('quoteText').focus();
                        }, 500);
                    });
                }
                return;
            }

            // Loop through each filtered quote
            // forEach runs the function once for each item
            // We need to find the original index in the full quotes array for deletion
            filteredQuotes.forEach(function(quote) {
                // Find the index of this quote in the original quotes array
                const index = quotes.indexOf(quote);
                // Create a new div element for this quote
                const quoteDiv = document.createElement('div');

                // Give it the same class as existing quotes (for styling)
                quoteDiv.className = 'quote-container';

                // Set the HTML content inside the div
                // Backticks (`) allow us to use ${} to insert variables
                // We add a delete button with a unique data attribute to track which quote it is
                // Build category tags HTML if quote has categories
                let categoriesHTML = '';
                if (quote.categories && Array.isArray(quote.categories) && quote.categories.length > 0) {
                    categoriesHTML = '<div class="quote-categories">' +
                        quote.categories.map(function(cat) {
                            return '<span class="category-tag">' + cat + '</span>';
                        }).join('') +
                        '</div>';
                }

                quoteDiv.innerHTML = `
                    <p class="quote-text">"${quote.text}"</p>
                    <p class="quote-author">‚Äî ${createWikipediaLink(quote.author)}</p>
                    ${categoriesHTML}
                `;

                // Add this quote div to the page
                // appendChild adds it as a child of quotesContainer
                quotesContainer.appendChild(quoteDiv);
            });
        }

        // Function to display one random quote
        function displayRandomQuote() {
            // Clear everything in the container (start fresh)
            quotesContainer.innerHTML = '';

            // Check if we have any quotes to display
            if (quotes.length === 0) {
                quotesContainer.innerHTML = '<p style="text-align: center; color: #7f8c8d;">No quotes available. Add some quotes first!</p>';
                return;
            }

            // Get a random index from the quotes array
            // Math.random() gives a number between 0 and 1
            // Math.floor() rounds down to get a whole number
            const randomIndex = Math.floor(Math.random() * quotes.length);
            const quote = quotes[randomIndex];

            // Create a new div element for this quote
            const quoteDiv = document.createElement('div');
            quoteDiv.className = 'quote-container';

            // Set the HTML content - no delete button in random mode
            quoteDiv.innerHTML = `
                <p class="quote-text">"${quote.text}"</p>
                <p class="quote-author">‚Äî ${createWikipediaLink(quote.author)}</p>
            `;

            // Add this quote div to the page
            quotesContainer.appendChild(quoteDiv);
        }
    </script>
</body>
</html>
