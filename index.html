<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quote Collection</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }

        h1 {
            color: #2c3e50;
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .tagline {
            text-align: center;
            font-size: 1.2em;
            color: #7f8c8d;
            font-style: italic;
            margin-bottom: 40px;
        }

        .north-star {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .north-star h2 {
            color: #3498db;
            margin-top: 0;
        }

        .status {
            text-align: center;
            color: #27ae60;
            font-weight: bold;
        }

        .quote-container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            border-left: 4px solid #3498db;
        }

        .quote-text {
            font-size: 1.3em;
            font-style: italic;
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .quote-author {
            text-align: right;
            color: #7f8c8d;
            font-weight: bold;
        }

        /* CSS for the Add Quote form section */

        /* Main container for the form - gives it the white box style */
        .add-quote-section {
            background-color: white;
            padding: 30px;                              /* Space inside the box */
            border-radius: 8px;                         /* Rounded corners */
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);     /* Subtle shadow for depth */
            margin-bottom: 30px;                        /* Space below the box */
        }

        /* Heading inside the form section */
        .add-quote-section h2 {
            color: #3498db;                             /* Blue color */
            margin-top: 0;                              /* Remove space above */
            margin-bottom: 20px;                        /* Space below heading */
        }

        /* Each input field group (label + input) */
        .form-group {
            margin-bottom: 20px;                        /* Space between form fields */
        }

        /* Labels for the form inputs */
        .form-group label {
            display: block;                             /* Makes label take full width */
            margin-bottom: 8px;                         /* Space between label and input */
            color: #2c3e50;                             /* Dark gray color */
            font-weight: bold;                          /* Make text bold */
        }

        /* Text inputs and textarea styling */
        .form-group input,
        .form-group textarea {
            width: 100%;                                /* Full width of container */
            padding: 10px;                              /* Space inside the input */
            border: 2px solid #ddd;                     /* Light gray border */
            border-radius: 4px;                         /* Slightly rounded corners */
            font-size: 1em;                             /* Same size as body text */
            font-family: inherit;                       /* Use same font as page */
            box-sizing: border-box;                     /* Include padding in width */
        }

        /* When user clicks into an input - highlight it with blue border */
        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;                              /* Remove default browser outline */
            border-color: #3498db;                      /* Change border to blue */
        }

        /* The Add Quote button styling */
        .add-button {
            background-color: #3498db;                  /* Blue background */
            color: white;                               /* White text */
            padding: 12px 30px;                         /* Space inside button */
            border: none;                               /* Remove default border */
            border-radius: 4px;                         /* Rounded corners */
            font-size: 1em;                             /* Normal text size */
            font-weight: bold;                          /* Bold text */
            cursor: pointer;                            /* Show hand cursor on hover */
        }

        /* When user hovers mouse over the button - make it darker */
        .add-button:hover {
            background-color: #2980b9;                  /* Darker blue */
        }

        /* Delete button styling */
        .delete-button {
            background-color: #e74c3c;                  /* Red background */
            color: white;                               /* White text */
            padding: 8px 16px;                          /* Space inside button */
            border: none;                               /* Remove default border */
            border-radius: 4px;                         /* Rounded corners */
            font-size: 0.9em;                           /* Slightly smaller text */
            cursor: pointer;                            /* Show hand cursor on hover */
            margin-top: 10px;                           /* Space above button */
        }

        /* When user hovers over delete button - make it darker red */
        .delete-button:hover {
            background-color: #c0392b;                  /* Darker red */
        }

        /* Random quote section styling */
        .random-quote-section {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            text-align: center;
        }

        .random-quote-section h2 {
            color: #3498db;
            margin-top: 0;
            margin-bottom: 20px;
        }

        /* Random quote button styling */
        .random-button {
            background-color: #9b59b6;                  /* Purple background */
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 4px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            margin-right: 10px;
        }

        .random-button:hover {
            background-color: #8e44ad;                  /* Darker purple */
        }

        /* Show all button styling */
        .show-all-button {
            background-color: #27ae60;                  /* Green background */
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 4px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            display: none;                              /* Hidden by default */
        }

        .show-all-button:hover {
            background-color: #229954;                  /* Darker green */
        }
    </style>
</head>
<body>
    <h1>Hello, World!</h1>
    <p class="tagline">Welcome to our Quote Collection</p>

    <div class="north-star">
        <h2>Our Mission</h2>
        <p>I'm building a quote collection for community so that we can save and revisit quotes that inspire or resonate with everyone.</p>
    </div>

    <!-- Random Quote Section -->
    <div class="random-quote-section">
        <h2>Feeling Lucky?</h2>
        <button id="randomButton" class="random-button">Show Random Quote</button>
        <button id="anotherRandomButton" class="random-button" style="display: none;">Show Another Random Quote</button>
        <button id="showAllButton" class="show-all-button">Show All Quotes</button>
    </div>

    <!-- Initial quotes will be loaded from data.js and displayed here by JavaScript -->

    <!-- Form Section: Where users can add new quotes -->
    <div class="add-quote-section">
        <h2>Add Your Own Quote</h2>
        <!-- The form element - collects user input -->
        <form id="quoteForm">
            <!-- First input group: for the quote text -->
            <div class="form-group">
                <label for="quoteText">Quote:</label>
                <!-- textarea allows multiple lines of text -->
                <!-- required means user must fill this out -->
                <textarea id="quoteText" name="quoteText" rows="3" required placeholder="Enter the quote here..."></textarea>
            </div>
            <!-- Second input group: for the author name -->
            <div class="form-group">
                <label for="quoteAuthor">Author:</label>
                <!-- input type="text" is a single-line text box -->
                <input type="text" id="quoteAuthor" name="quoteAuthor" required placeholder="Author name">
            </div>
            <!-- Submit button - triggers form submission -->
            <button type="submit" class="add-button">Add Quote</button>
        </form>
    </div>

    <!-- Container where all newly added quotes will appear -->
    <div id="quotesContainer"></div>

    <p class="status">ðŸš€ Your first webpage is live!</p>

    <!-- Load the quote data from external file -->
    <!-- This must come BEFORE our main script so initialQuotes is available -->
    <script src="data.js"></script>

    <script>
        // JavaScript starts here

        // localStorage key - this is the name we use to store/retrieve quotes
        const STORAGE_KEY = 'quoteCollection';

        // Function to save quotes to localStorage
        // localStorage only stores strings, so we convert the array to JSON
        function saveQuotes() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(quotes));
        }

        // Function to load quotes from localStorage
        // Returns the saved quotes, or null if nothing is saved yet
        function loadQuotes() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                // If we found saved quotes, parse the JSON string back into an array
                return JSON.parse(saved);
            }
            return null;
        }

        // Create an array to store all quotes
        // First, try to load from localStorage
        // If nothing is saved yet, use the initial quotes from data.js and save them
        let quotes;
        const savedQuotes = loadQuotes();
        if (savedQuotes) {
            // We have saved quotes - use them
            quotes = savedQuotes;
        } else {
            // No saved quotes yet - use initial quotes and save them for next time
            quotes = [...initialQuotes];
            saveQuotes();
        }

        // Get references to HTML elements so we can interact with them
        // document.getElementById finds an element by its ID
        const form = document.getElementById('quoteForm');
        const quotesContainer = document.getElementById('quotesContainer');
        const randomButton = document.getElementById('randomButton');
        const anotherRandomButton = document.getElementById('anotherRandomButton');
        const showAllButton = document.getElementById('showAllButton');

        // Variable to track if we're showing one random quote or all quotes
        let showingRandomQuote = false;

        // Listen for when the form is submitted (when user clicks "Add Quote")
        // addEventListener watches for events (like submit, click, etc.)
        form.addEventListener('submit', function(e) {
            // Prevent the page from reloading (default form behavior)
            e.preventDefault();

            // Get the values that the user typed into the form fields
            // .value gives us the current text inside an input
            const quoteText = document.getElementById('quoteText').value;
            const quoteAuthor = document.getElementById('quoteAuthor').value;

            // Add the new quote to our quotes array
            // push() adds an item to the end of an array
            // We're adding an object with two properties: text and author
            quotes.push({
                text: quoteText,
                author: quoteAuthor
            });

            // Save the updated quotes array to localStorage
            saveQuotes();

            // Call the function to display all quotes on the page
            displayQuotes();

            // Clear the form inputs so user can add another quote
            form.reset();
        });

        // Random Quote button - show one random quote (initial click)
        randomButton.addEventListener('click', function() {
            showingRandomQuote = true;
            displayRandomQuote();
            // Hide the initial "Show Random Quote" button
            // Show both "Show Another Random Quote" and "Show All Quotes" buttons
            randomButton.style.display = 'none';
            anotherRandomButton.style.display = 'inline-block';
            showAllButton.style.display = 'inline-block';
        });

        // Another Random Quote button - show another random quote
        anotherRandomButton.addEventListener('click', function() {
            // Display another random quote
            displayRandomQuote();
        });

        // Show All Quotes button - return to showing all quotes
        showAllButton.addEventListener('click', function() {
            showingRandomQuote = false;
            displayQuotes();
            // Reset buttons: show the initial "Show Random Quote" button
            // Hide the "Show Another Random Quote" and "Show All Quotes" buttons
            randomButton.style.display = 'inline-block';
            anotherRandomButton.style.display = 'none';
            showAllButton.style.display = 'none';
        });

        // When the page first loads, display all the quotes
        displayQuotes();

        // Function to display all quotes on the page
        function displayQuotes() {
            // Clear everything in the container (start fresh)
            quotesContainer.innerHTML = '';

            // Loop through each quote in the quotes array
            // forEach runs the function once for each item
            // The second parameter (index) tells us the position of this quote in the array
            quotes.forEach(function(quote, index) {
                // Create a new div element for this quote
                const quoteDiv = document.createElement('div');

                // Give it the same class as existing quotes (for styling)
                quoteDiv.className = 'quote-container';

                // Set the HTML content inside the div
                // Backticks (`) allow us to use ${} to insert variables
                // We add a delete button with a unique data attribute to track which quote it is
                quoteDiv.innerHTML = `
                    <p class="quote-text">"${quote.text}"</p>
                    <p class="quote-author">â€” ${quote.author}</p>
                    <button class="delete-button" data-index="${index}">Delete</button>
                `;

                // Add this quote div to the page
                // appendChild adds it as a child of quotesContainer
                quotesContainer.appendChild(quoteDiv);
            });

            // After creating all quotes, add click handlers to all delete buttons
            // querySelectorAll finds all elements that match the selector
            const deleteButtons = document.querySelectorAll('.delete-button');
            deleteButtons.forEach(function(button) {
                button.addEventListener('click', function() {
                    // Get the index from the button's data attribute
                    // This tells us which quote to delete
                    const indexToDelete = parseInt(button.getAttribute('data-index'));

                    // Step 1: Ask for password
                    // prompt() shows a popup where user can type input
                    const userPassword = prompt('Enter password to delete this quote:');

                    // Step 2: Check if password is correct
                    // The secret password is stored here (visible in source code)
                    const secretPassword = 'udadoise';

                    if (userPassword !== secretPassword) {
                        // Password is wrong - show error and stop
                        alert('Incorrect password. Quote not deleted.');
                        return;
                    }

                    // Step 3: Password is correct - now ask for confirmation
                    // confirm() shows a popup with OK and Cancel buttons
                    const confirmed = confirm('Are you sure you want to delete this quote?');

                    if (!confirmed) {
                        // User clicked Cancel - stop here
                        return;
                    }

                    // Both password correct AND user confirmed - proceed with deletion
                    // Remove the quote from the array
                    // splice removes items from an array
                    // splice(index, 1) means "remove 1 item at this index"
                    quotes.splice(indexToDelete, 1);

                    // Save the updated quotes to localStorage
                    saveQuotes();

                    // Re-display all quotes (now one less)
                    displayQuotes();
                });
            });
        }

        // Function to display one random quote
        function displayRandomQuote() {
            // Clear everything in the container (start fresh)
            quotesContainer.innerHTML = '';

            // Check if we have any quotes to display
            if (quotes.length === 0) {
                quotesContainer.innerHTML = '<p style="text-align: center; color: #7f8c8d;">No quotes available. Add some quotes first!</p>';
                return;
            }

            // Get a random index from the quotes array
            // Math.random() gives a number between 0 and 1
            // Math.floor() rounds down to get a whole number
            const randomIndex = Math.floor(Math.random() * quotes.length);
            const quote = quotes[randomIndex];

            // Create a new div element for this quote
            const quoteDiv = document.createElement('div');
            quoteDiv.className = 'quote-container';

            // Set the HTML content - no delete button in random mode
            quoteDiv.innerHTML = `
                <p class="quote-text">"${quote.text}"</p>
                <p class="quote-author">â€” ${quote.author}</p>
            `;

            // Add this quote div to the page
            quotesContainer.appendChild(quoteDiv);
        }
    </script>
</body>
</html>
